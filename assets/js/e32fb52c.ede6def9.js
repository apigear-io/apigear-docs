"use strict";(self.webpackChunkapigear=self.webpackChunkapigear||[]).push([[4498],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,f=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return n?r.createElement(f,a(a({ref:t},u),{},{components:n})):r.createElement(f,a({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7523:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(7462),o=(n(7294),n(3905));const i={sidebar_position:3},a="Network Protocol",s={unversionedId:"advanced/simulation/protocols",id:"advanced/simulation/protocols",title:"Network Protocol",description:"The simulation framework allows client to simulate interfaces using a simulation server. A client receives simulated responses or behavior based on a provided scenario document.",source:"@site/docs/advanced/simulation/protocols.md",sourceDirName:"advanced/simulation",slug:"/advanced/simulation/protocols",permalink:"/docs/advanced/simulation/protocols",draft:!1,editUrl:"https://github.com/apigear-io/apigear-docs/edit/main/docs/advanced/simulation/protocols.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Scenario Documents",permalink:"/docs/advanced/simulation/scenario"},next:{title:"Simulation with Studio",permalink:"/docs/advanced/simulation/studio"}},l={},c=[{value:"Example",id:"example",level:2},{value:"ObjectLink Protocol for Simulation",id:"objectlink-protocol-for-simulation",level:2},{value:"Feeding the Simulation Server",id:"feeding-the-simulation-server",level:2}],u={toc:c};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"network-protocol"},"Network Protocol"),(0,o.kt)("p",null,"The simulation framework allows client to simulate interfaces using a simulation server. A client receives simulated responses or behavior based on a provided scenario document. "),(0,o.kt)("p",null,"The simulation server can be called using the ObjectLink protocol."),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"In the following we will use always our counter example which looks like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'schema: apigear.module/1.0\nname: demo\nversion: "1.0"\n\ninterfaces:\n  - name: Counter\n    properties:\n      - name: count\n        type: int\n    operations:\n      - name: increment\n        params:\n          - name: step\n            type: int\n      - name: decrement\n        params:\n          - name: step\n            type: int\n  - name: Echo\n    operations:\n      - name: say\n        params:\n          - name: message\n            type: string\n        return:\n          - type: string\n')),(0,o.kt)("p",null,"We can identify an operation using an URI like this ",(0,o.kt)("inlineCode",{parentName:"p"},"demo.Counter/increment")," and a service like this ",(0,o.kt)("inlineCode",{parentName:"p"},"demo.Counter"),"."),(0,o.kt)("p",null,"As a convention, calling the service should always give back the current state, which is the sum of properties. Calling an operation should always return a valid value defined by the ",(0,o.kt)("inlineCode",{parentName:"p"},"return")," type."),(0,o.kt)("h2",{id:"objectlink-protocol-for-simulation"},"ObjectLink Protocol for Simulation"),(0,o.kt)("p",null,"The simulation server can be called using the ObjectLink protocol over WebSockets. The protocol is described in the ",(0,o.kt)("a",{parentName:"p",href:"/docs/advanced/objectlink/intro"},"ObjectLink specification"),"."),(0,o.kt)("p",null,"An incoming object link message is wired to a scenario document. Each scenario document can contain multiple interfaces. The interface name is used to identify the interface to be simulated. The operation name is used to identify the operation to be simulated. In case no scenario document is provided, the simulation server will use a default scenario document."),(0,o.kt)("h2",{id:"feeding-the-simulation-server"},"Feeding the Simulation Server"),(0,o.kt)("p",null,"The simulation server can be fed with a a set of JSON messages arranged in a new-line separated JSON file. The file can be provided using the ",(0,o.kt)("inlineCode",{parentName:"p"},"--feed")," command line option of the CLI. The file can be used to feed the simulation server with a set of messages. The messages are sent to the simulation server in the order they are provided in the file. The file can be used to feed the simulation server with a set of messages. The messages are sent to the simulation server in the order they are provided in the file."),(0,o.kt)("p",null,"Feeding a simulation server is a great way to validate your simulation scenario or even your object-link service."))}d.isMDXComponent=!0}}]);