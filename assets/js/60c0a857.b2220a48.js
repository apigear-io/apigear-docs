"use strict";(self.webpackChunkapigear=self.webpackChunkapigear||[]).push([[1787],{25314:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"advanced/stimulation/intro","title":"API Stimulation","description":"The stimulation is experimental and may not work yet fully","source":"@site/docs/advanced/stimulation/intro.md","sourceDirName":"advanced/stimulation","slug":"/advanced/stimulation/intro","permalink":"/docs/advanced/stimulation/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/apigear-io/apigear-docs/edit/main/docs/advanced/stimulation/intro.md","tags":[],"version":"current","lastUpdatedAt":1750096349000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Monitoring Protocol","permalink":"/docs/advanced/monitor/protocol"},"next":{"title":"Protocol Mappings","permalink":"/docs/advanced/protocols/mapping"}}');var o=t(74848),a=t(28453);const r={},s="API Stimulation",c={},l=[{value:"Why?",id:"why",level:2},{value:"Stimulation file?",id:"stimulation-file",level:2},{value:"Running the stimulation",id:"running-the-stimulation",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"api-stimulation",children:"API Stimulation"})}),"\n",(0,o.jsx)(n.admonition,{title:"Experimental",type:"warning",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"stimulation"})," is experimental and may not work yet fully"]})}),"\n",(0,o.jsx)(n.h2,{id:"why",children:"Why?"}),"\n",(0,o.jsx)(n.p,{children:"Stimulation allows to trigger sequences of operations or data changes on a service. This is useful to test the behavior of a service or to simulate a user interaction."}),"\n",(0,o.jsx)(n.mermaid,{value:"graph LR\n  Stimulation -. objectlink .-> Service"}),"\n",(0,o.jsx)(n.h2,{id:"stimulation-file",children:"Stimulation file?"}),"\n",(0,o.jsx)(n.p,{children:"A stimulation file is a JavaScript file which contains a stimulation scenario. The stimulation comes in the form of a client which can be used to trigger sequences of operations or data changes on a service."}),"\n",(0,o.jsx)(n.p,{children:"Base on this API example we can create a client which can be used to trigger sequences of operations or data changes on a service."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"module demo\n\ninterface Counter {\n  count: int\n  increment()\n  decrement()\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"The counter example shows a simple interface which can be used to increment or decrement a reactive counter. The stimulation file will look like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// counter_client.js\n\nconst url = "ws://localhost:5555/ws"\nconst channel =$createChannel(url)\n// create a client based on module and interface name and provide initial properties\nconst counter = channel.createClient("demo.Counter", { count: 0 });\n\n// trigger the increment operation\ncounter.callMethod("increment")\n\n// trigger the decrement operation\ncounter.callMethod("decrement")\n\nfunction main() { // main is auto run on script execution\n  for (let i = 0; i < 10; i++) {\n    counter.callMethod("increment")\n    counter.callMethod("decrement")\n  }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"To run the stimulation file we need to start a remote service"}),"\n",(0,o.jsx)(n.h2,{id:"running-the-stimulation",children:"Running the stimulation"}),"\n",(0,o.jsx)(n.p,{children:"We will use a simulation file to simulate a service."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"apigear sim run counter_service.js\n"})}),"\n",(0,o.jsx)(n.p,{children:"This will run the simulation and provide the simulation interface to the client."}),"\n",(0,o.jsx)(n.p,{children:"Now we can run the stimulation file:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"// run simulation client but don't create a server\napigear sim run counter_client.js --no-serve\n"})}),"\n",(0,o.jsx)(n.p,{children:"This will run the stimulation file and trigger the operations on the simulation interface."})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var i=t(96540);const o={},a=i.createContext(o);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);