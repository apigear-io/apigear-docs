"use strict";(self.webpackChunkapigear=self.webpackChunkapigear||[]).push([[5771],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>y});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=p(n),u=i,y=c["".concat(s,".").concat(u)]||c[u]||d[u]||r;return n?a.createElement(y,o(o({ref:t},m),{},{components:n})):a.createElement(y,o({ref:t},m))}));function y(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6084:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:2},o="API Foundation",l={unversionedId:"advanced/objectapi/core",id:"advanced/objectapi/core",title:"API Foundation",description:"ObjectAPI is defined in terms of modules inside a system. Each module is described as an ObjectAPI document.",source:"@site/docs/advanced/objectapi/core.md",sourceDirName:"advanced/objectapi",slug:"/advanced/objectapi/core",permalink:"/docs/advanced/objectapi/core",draft:!1,editUrl:"https://github.com/apigear-io/apigear-docs/edit/main/docs/advanced/objectapi/core.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Introduction",permalink:"/docs/advanced/objectapi/intro"},next:{title:"API Modules",permalink:"/docs/advanced/objectapi/modules"}},s={},p=[{value:"Format",id:"format",level:2},{value:"Managing Documents",id:"managing-documents",level:2},{value:"Data Types",id:"data-types",level:2},{value:"Primitives",id:"primitives",level:2},{value:"Arrays",id:"arrays",level:2},{value:"Complex Types",id:"complex-types",level:2},{value:"Rich Text Formatting",id:"rich-text-formatting",level:2}],m={toc:p};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"api-foundation"},"API Foundation"),(0,i.kt)("p",null,"ObjectAPI is defined in terms of modules inside a system. Each module is described as an ObjectAPI document."),(0,i.kt)("p",null,"ObjectAPI is a YAML based specification to describe objects as interfaces."),(0,i.kt)("h2",{id:"format"},"Format"),(0,i.kt)("p",null,"ObjectAPI is described as an open specification format using JSON Schema. Every ObjectAPI document must conform to this JSON schema definition."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"While the the API is described in JSON, other formats like YAML can be used as input formats and are automatically converted to JSON by the ObjectAPI tooling.")),(0,i.kt)("p",null,"Unless otherwise noted all file names in this specification are case sensitive."),(0,i.kt)("h2",{id:"managing-documents"},"Managing Documents"),(0,i.kt)("p",null,"The ObjectAPI documents are simple files on the file system. Several files can be processed together and form a system. It is convention that the file name matches the module name."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"*.module.yaml")," | ",(0,i.kt)("inlineCode",{parentName:"li"},"*.module.json")," - ObjectAPI document")),(0,i.kt)("p",null,"Other files can be added which contain meta information for the API modules. They allow to inject additional information which is not relevant or available during API definitions."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"*.module.meta.yaml")," | ",(0,i.kt)("inlineCode",{parentName:"li"},"*.module.meta.json")," - ObjectAPI meta information injected into the relevant APIs.")),(0,i.kt)("p",null,"So if a module is name ",(0,i.kt)("inlineCode",{parentName:"p"},"org.example")," the ObjectAPI document should be called ",(0,i.kt)("inlineCode",{parentName:"p"},"org.example.module.yaml")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Outside of the ObjectAPI specification a solution document format is described which binds several modules together and links them to a code template for code generation.")),(0,i.kt)("h2",{id:"data-types"},"Data Types"),(0,i.kt)("p",null,"In the ObjectAPI specification data types are used in many locations. State, Method return types and parameters, signal parameters or structures."),(0,i.kt)("p",null,"Data fields are added at the same level to describe the data name and type. For example for the interface properties, these are:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"properties:\n  - name: count\n    type: int\n")),(0,i.kt)("p",null,"The general types available to ObjectAPI are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Primitives (",(0,i.kt)("inlineCode",{parentName:"li"},"bool"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"int"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"float"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"string"),")"),(0,i.kt)("li",{parentName:"ul"},"Containers (",(0,i.kt)("inlineCode",{parentName:"li"},"arrays"),")"),(0,i.kt)("li",{parentName:"ul"},"Complex (",(0,i.kt)("inlineCode",{parentName:"li"},"structures"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"enumerations"),")")),(0,i.kt)("h2",{id:"primitives"},"Primitives"),(0,i.kt)("p",null,"Data types can be re-presented in different forms in different programming languages. They all need to be convertible to JSON data types on request."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"bool")," - A simple boolean value (true or false)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"int")," - A signed integer value"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"float")," - A floating point value"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"string")," - A string value")),(0,i.kt)("h2",{id:"arrays"},"Arrays"),(0,i.kt)("p",null,"An array is an index based list of primitive or complex data types. Further nesting of containers are not supported but can be achieved using structs as array items. A data type is converted into a container by setting the type to array and specifying the containing type in the items key."),(0,i.kt)("p",null,"For example an integer array can be noted like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"properties:\n  - name: names\n    type: array\n    items: string\n")),(0,i.kt)("p",null,"If an array does contain a symbol as containing type, then the symbol name can be used in the items key."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"properties:\n  - name: messages\n    type: array\n    items: Message\n")),(0,i.kt)("p",null,"Primitive types are always start with a lower case character and symbols always with an upper case character."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"The code templates will change the casing based on the target language preferences.")),(0,i.kt)("h2",{id:"complex-types"},"Complex Types"),(0,i.kt)("p",null,"A symbol is a named element inside a module. This can be either an interface, struct or enum/flag symbol."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"structs:\n  - name: Message\n")),(0,i.kt)("p",null,"Inside the same module the type can be referenced by the name of the symbol using a ",(0,i.kt)("inlineCode",{parentName:"p"},"ref"),". This holds true for all symbols."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"properties:\n  - name: msg1\n    type: Message\n  - name: msg2\n    type: array\n    items: struct\n    symbol: Message\n")),(0,i.kt)("p",null,"Outside the module, the module itself needs to be imported and the type needs to be used with its fully qualified name"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"imports:\n  - org.example\n\ninterfaces:\n  - name: Interface1\n    properties:\n      - name: msg1\n        type: org.example.Message\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"org.example.Message")," - external symbol")),(0,i.kt)("p",null,"Note: Not every language profile does support importing."),(0,i.kt)("h2",{id:"rich-text-formatting"},"Rich Text Formatting"),(0,i.kt)("p",null,"Throughout the specification ",(0,i.kt)("inlineCode",{parentName:"p"},"description")," support the markdown syntax."))}c.isMDXComponent=!0}}]);