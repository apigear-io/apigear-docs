"use strict";(self.webpackChunkapigear=self.webpackChunkapigear||[]).push([[6758],{2265:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var n=o(4848),i=o(8453);const a={sidebar_position:2},s="Code Generation",r={id:"tools/cli/generate",title:"Code Generation",description:"The apigear command line tool can be used to generate code from an API definition with a generate command.",source:"@site/docs/tools/cli/generate.md",sourceDirName:"tools/cli",slug:"/tools/cli/generate",permalink:"/docs/tools/cli/generate",draft:!1,unlisted:!1,editUrl:"https://github.com/apigear-io/apigear-docs/edit/main/docs/tools/cli/generate.md",tags:[],version:"current",lastUpdatedAt:1727808477e3,sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Introduction",permalink:"/docs/tools/cli/intro"},next:{title:"SDK Templates",permalink:"/docs/tools/cli/template"}},l={},d=[{value:"Quick Code Generation",id:"quick-code-generation",level:2},{value:"Solution based Code Generation",id:"solution-based-code-generation",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"code-generation",children:"Code Generation"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"apigear"})," command line tool can be used to generate code from an API definition with a ",(0,n.jsx)(t.code,{children:"generate"})," command.\nThe API should be description in a module file(s). The generation is based on SDK templates which are available in a central registry or a local template provided with relative path. You can have the solution file in which you choose modules, technologies (templates) and features for them or you can use quick generation option, without the solution file providing all those information as arguments to a ",(0,n.jsx)(t.code,{children:"generate"})," command.\nYou can define your modules in yaml or idl. See more details for ",(0,n.jsx)(t.a,{href:"/docs/objectapi/modules",children:"defining an API"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"The following examples shows how to generate code for a demo API definition."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-go",children:"// demo.idl\nmodule demo 1.0\n\ninterface Counter {\n    count: int\n    increment()\n    decrement()\n}\n"})}),"\n",(0,n.jsx)(t.h2,{id:"quick-code-generation",children:"Quick Code Generation"}),"\n",(0,n.jsxs)(t.p,{children:["For example to generate a C++ 14 SDK from the demo API definition just run the following command. You can check ",(0,n.jsx)(t.a,{href:"/docs/tools/cli/template#list-available-templates",children:"available templates"})," from command line tool."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"apigear generate expert -i demo.idl -o tmp -t apigear-io/template-cpp14 -f stubs\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"expert"})," mode is used to generate code from module files.",(0,n.jsx)("br",{}),"\nThe ",(0,n.jsx)(t.code,{children:"-i"})," option specifies the input module files separated with comma.",(0,n.jsx)("br",{}),"\nThe ",(0,n.jsx)(t.code,{children:"-o"})," option specifies the output directory.",(0,n.jsx)("br",{}),"\nThe ",(0,n.jsx)(t.code,{children:"-t"})," option specifies the template to use. The ",(0,n.jsx)(t.code,{children:"apigear-io/template-cpp14"})," template is used to generate C++ 14 code.",(0,n.jsx)("br",{}),"\nThe ",(0,n.jsx)(t.code,{children:"-f"})," option can be used to provide features. Check each teamplate documentation to see available features. ",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(t.p,{children:["If the template does not point to a local directory the template will be downloaded from the template registry and installed in a local cache directory (if not already installed).",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(t.p,{children:["By default the latest version of the template is used. To use a specific version of the template add the version to the template name using the ",(0,n.jsx)(t.code,{children:"@<version>"})," syntax."]}),"\n",(0,n.jsx)(t.h2,{id:"solution-based-code-generation",children:"Solution based Code Generation"}),"\n",(0,n.jsx)(t.p,{children:"To streamline the code generation you can create a configuration file called solution. The following example shows how to create a configuration file for the C++ 14 SDK."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:"# solution.yaml\ntargets:\n  - name: cpp14\n    inputs:\n      - demo.idl\n    output: demo_project\n    template: apigear-io/template-cpp14\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"targets"})," section defines a set of inputs, an output directory for each template.",(0,n.jsx)("br",{}),"\nThe ",(0,n.jsx)(t.code,{children:"inputs"})," section defines the module files with API descriptions. List here all the files necessary for the generation. ",(0,n.jsx)("br",{}),"\nThe ",(0,n.jsx)(t.code,{children:"output"})," section defines the output directory for the layer.",(0,n.jsx)("br",{}),"\nThe ",(0,n.jsx)(t.code,{children:"template"})," defines the template used for code generation. You can provide the template version adding ",(0,n.jsx)(t.code,{children:"@<version>"})," to a template.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(t.p,{children:"To generate the code from the solution just run the following command."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"apigear generate solution solution.yaml\n"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>r});var n=o(6540);const i={},a=n.createContext(i);function s(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);